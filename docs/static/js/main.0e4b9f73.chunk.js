(this["webpackJsonpspace-invaders-react-redux"]=this["webpackJsonpspace-invaders-react-redux"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var s,i,a,l=n(0),o=n.n(l),r=n(7),c=n.n(r),f=(n(13),n(14),n(1)),u=n(2),h=n(4),m=n(3),p=n(5);!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.DOWN=2]="DOWN"}(s||(s={})),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(i||(i={})),function(e){e.ENEMY="ENEMY",e.SHOT_ENEMY="SHOT_ENEMY",e.SHOT_PLAYER="SHOT_PLAYER",e.PLAYER="PLAYER",e.KA_BOOM="KA_BOOM"}(a||(a={}));var E,y=function(e){var t=e.element;return o.a.createElement("div",{style:{width:"10px",height:"10px"}},function(){switch(t.getType()){case a.ENEMY:return"#";case a.SHOT_ENEMY:return"!";case a.SHOT_PLAYER:return"|";case a.PLAYER:return"^";case a.KA_BOOM:return"*";default:return"."}}())},v=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={stats:"",listOfElements:[]},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.renderPlate()}},{key:"refreshStats",value:function(){this.setState({stats:this.props.plate.getStats()})}},{key:"renderPlate",value:function(){this.setState({listOfElements:this.props.plate.render()}),this.refreshStats()}},{key:"findCollisions",value:function(){this.props.plate.findCollisions(),this.refreshStats()}},{key:"enemyShoot",value:function(){this.props.plate.enemyShoot(),this.refreshStats()}},{key:"tick",value:function(){this.calculateNextPos(),this.findCollisions(),this.renderPlate()}},{key:"playerShoot",value:function(){this.props.plate.playerShoot(),this.refreshStats()}},{key:"calculateNextPos",value:function(){this.props.plate.calculateNextPos(),this.refreshStats()}},{key:"movePlayerLeft",value:function(){this.props.plate.movePlayer(i.LEFT),this.refreshStats()}},{key:"movePlayerRight",value:function(){this.props.plate.movePlayer(i.RIGHT),this.refreshStats()}},{key:"render",value:function(){var e=this.state,t=e.listOfElements,n=e.stats;return o.a.createElement(o.a.Fragment,null,"I'm the Plate",o.a.createElement("div",null,o.a.createElement("div",{style:{float:"left",width:"50%"}},o.a.createElement("table",null,o.a.createElement("tbody",null,t.map((function(e,t){return o.a.createElement("tr",{key:t},e.map((function(e,t){return o.a.createElement("td",{key:t},e?o.a.createElement(y,{element:e}):o.a.createElement("div",{style:{width:"10px",height:"10px"}},"."))})))})))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{style:{width:"100%"}},o.a.createElement("div",{style:{float:"left",width:"25%",textAlign:"left",paddingLeft:"1em"}},"player",o.a.createElement("br",null),o.a.createElement("button",{onClick:this.movePlayerLeft.bind(this)},"left"),o.a.createElement("button",{onClick:this.movePlayerRight.bind(this)},"right"),o.a.createElement("button",{onClick:this.playerShoot.bind(this)},"shoot!")),o.a.createElement("div",{style:{float:"left",width:"25%",textAlign:"left",paddingLeft:"1em"}},"enemy",o.a.createElement("br",null),o.a.createElement("button",{onClick:this.enemyShoot.bind(this)},"shoot!")),o.a.createElement("div",{style:{float:"left",width:"25%",textAlign:"left",paddingLeft:"1em"}},"actions",o.a.createElement("br",null),o.a.createElement("button",{onClick:this.tick.bind(this)},"tick ! (1,2,3)"),o.a.createElement("br",null),o.a.createElement("button",{onClick:this.calculateNextPos.bind(this)},"1. calculate next pos"),o.a.createElement("br",null),o.a.createElement("button",{onClick:this.findCollisions.bind(this)},"2. check collisions"),o.a.createElement("br",null),o.a.createElement("button",{onClick:this.renderPlate.bind(this)},"3. render"),o.a.createElement("br",null)))),o.a.createElement("div",{style:{float:"left",width:"40%",textAlign:"left",paddingLeft:"1em"}},o.a.createElement("small",null,o.a.createElement("pre",null,n)))))}}]),t}(o.a.Component),O=function(){function e(t){Object(f.a)(this,e),this.type=void 0,this.pos=void 0,this.type=t.type,this.pos=t.pos}return Object(u.a)(e,[{key:"getPos",value:function(){return this.pos}},{key:"setPosX",value:function(e){this.pos.x=e}},{key:"setPosY",value:function(e){this.pos.y=e}},{key:"isPos",value:function(e,t){return this.pos.x===e&&this.pos.y===t}},{key:"getType",value:function(){return this.type}}]),e}(),d=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,{pos:e.pos,type:a.ENEMY}))).subtype=void 0,n.subtype=e.subtype,n}return Object(p.a)(t,e),t}(O);!function(e){e[e.NORMAL=0]="NORMAL"}(E||(E={}));var P=function(){function e(){Object(f.a)(this,e),this.maxX=11,this.maxY=10,this.playerLife=3,this.listOfElements=void 0,this.playerPosOffsset=0,this.enemiesMoveOffsset=0,this.enemiesMoveState=[s.RIGHT,s.LEFT,s.RIGHT,s.LEFT,s.DOWN],this.listOfElements=this.initLisOfElements()}return Object(u.a)(e,[{key:"render",value:function(){for(var e=[],t=0;t<this.maxY;t++){for(var n=[],s=0;s<this.maxX;s++)n.push(this.findElement(s,t));e.push(n)}return e}},{key:"calculateNextPos",value:function(){var e=this,t=[];this.listOfElements.forEach((function(n,i){switch((n.getPos().x>e.maxX||n.getPos().y>e.maxY)&&t.push(i),(n.getPos().x<0||n.getPos().y<0)&&t.push(i),n.getType()){case a.KA_BOOM:t.push(i);break;case a.PLAYER:n.setPosX(n.getPos().x+e.playerPosOffsset);break;case a.SHOT_ENEMY:n.setPosY(n.getPos().y+1);break;case a.SHOT_PLAYER:n.setPosY(n.getPos().y-1);break;case a.ENEMY:var l=e.enemiesMoveState.length;e.enemiesMoveOffsset===l&&(e.enemiesMoveOffsset=0),e.enemiesMoveState[e.enemiesMoveOffsset]===s.LEFT&&n.setPosX(n.getPos().x-1),e.enemiesMoveState[e.enemiesMoveOffsset]===s.RIGHT&&n.setPosX(n.getPos().x+1),e.enemiesMoveState[e.enemiesMoveOffsset]===s.DOWN&&n.setPosY(n.getPos().y+1)}})),t.forEach((function(t){e.listOfElements.splice(t,1)})),this.playerPosOffsset=0,this.enemiesMoveOffsset++}},{key:"findCollisions",value:function(){for(var e=this,t=function(t){for(var n=function(n){var s=e.findElements(n,t);if(2===s.length){e.listOfElements=e.listOfElements.filter((function(e){return!1===e.isPos(n,t)})),e.listOfElements.push(new O({type:a.KA_BOOM,pos:{x:n,y:t}}));var i=s.find((function(e){return e.getType()===a.SHOT_ENEMY})),l=s.find((function(e){return e.getType()===a.ENEMY})),o=s.find((function(e){return e.getType()===a.PLAYER}));(i&&o||o&&l)&&e.playerLife--}s.length>2&&(console.error("Something went wrong! More than 2 elements in one place!"),console.error(s))},s=0;s<e.maxX;s++)n(s)},n=0;n<this.maxY;n++)t(n)}},{key:"enemyShoot",value:function(){var e=-1;this.listOfElements.forEach((function(t){t.getType()===a.ENEMY&&(e=t.getPos().y>e?t.getPos().y:e)}));var t=this.listOfElements.filter((function(t){return t.getType()===a.ENEMY&&t.getPos().y===e})),n=t[Math.floor(Math.random()*t.length)];this.listOfElements.push(new O({type:a.SHOT_ENEMY,pos:{x:n.getPos().x,y:n.getPos().y}}))}},{key:"playerShoot",value:function(){var e=this.listOfElements.find((function(e){return e.getType()===a.PLAYER}));e&&this.listOfElements.push(new O({type:a.SHOT_PLAYER,pos:{x:e.getPos().x,y:e.getPos().y}}))}},{key:"getStats",value:function(){return"\n            life: ".concat(this.playerLife,"\n            playerPosOffsset: ").concat(this.playerPosOffsset,"\n            elements:\n            ").concat(this.listOfElements.map((function(e){return"\n                    type: ".concat(e.getType(),"\n                    pos: ").concat(JSON.stringify(e.getPos()))})).join("\r\n"))}},{key:"movePlayer",value:function(e){this.playerPosOffsset=e===i.LEFT?this.playerPosOffsset-1:this.playerPosOffsset+1}},{key:"findElement",value:function(e,t){return this.listOfElements.find((function(n){return n.isPos(e,t)}))||null}},{key:"findElements",value:function(e,t){return this.listOfElements.filter((function(n){return n.isPos(e,t)}))||[]}},{key:"initLisOfElements",value:function(){for(var e=[],t=0;t<3;t++)for(var n=2===t?1:t+1,s=0;s<4;s++)e.push(new d({subtype:E.NORMAL,pos:{x:s+n,y:t+1}})),n++;return e.push(new O({type:a.PLAYER,pos:{x:5,y:9}})),e}}]),e}(),g=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(v,{plate:new P}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.0e4b9f73.chunk.js.map